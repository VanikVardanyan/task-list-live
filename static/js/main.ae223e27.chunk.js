(this.webpackJsonpsoftlex=this.webpackJsonpsoftlex||[]).push([[0],{142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a.n(c),i=a(18),s=a(56),l=a(16),d=a(197),u=a(188),j=a(199),b=a(200),p=a(201),O=a(17),m=a(10),h=a(44),x=a.n(h);function f(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function g(e,t){return"desc"===e?function(e,a){return f(e,a,t)}:function(e,a){return-f(e,a,t)}}function v(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}var y=function(){var e=localStorage.getItem("token");return!!e&&function(e){return!!(864e5>=Date.now()-e)||(localStorage.removeItem("token"),!1)}(JSON.parse(e).timestamp)},k=function(){var e=localStorage.getItem("token");return!!e&&JSON.parse(e)},S=function(e,t){return t?"https://uxcandy.com/~shapoval/test-task-backend/v2/".concat(e,"/?developer=LeonidKorzhov&page=").concat(t):"https://uxcandy.com/~shapoval/test-task-backend/v2/".concat(e,"/?developer=LeonidKorzhov")},T="GET_TASKS_REQUEST",C="GET_TASKS_SUCCESS",E="GET_TASKS_ERROR",w="CREATE_TASK_REQUEST",L="CREATE_TASK_SUCCESS",I="CREATE_TASK_ERROR",N="EDIT_TASK_REQUEST",_="EDIT_TASK_SUCCESS",R="EDIT_TASK_ERROR",A="TOGGLE_TASK_STATUS",D=function(){return{type:T}},U=function(e){return{type:C,payload:e}},F=function(e){return{type:E,payload:e}},K=function(e){return{type:I,payload:e}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){var a=D();t(a);var n=S("",e);x.a.get(n).then((function(e){var a=U(e.data);t(a)})).catch((function(e){var a=F(e);t(a)}))}},W=function(e){return function(t){t({type:w});var a=S("create"),n=new FormData;return n.append("username",e.username),n.append("email",e.email),n.append("text",e.text),x.a.post(a,n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){if("ok"===e.data.status){var a=function(e){return{type:L,payload:e}}(e.data);t(a)}if("error"===e.data.status){var n=K(e.data);t(n)}return e})).catch((function(e){var a=K(e);t(a)}))}},G=function(e){return function(t){var a=S("edit/".concat(e.id)),n=new FormData;n.append("username",e.username),n.append("email",e.email),n.append("text",e.text);var r,c=0===(r=e.status)?10:10===r?0:11===r?1:1===r?11:void 0;n.append("status",c);var o=k().token;return n.append("token",o),x.a.post(a,n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(a){if("ok"===a.data.status){var n=function(e){return{type:A,payload:e}}(Object(m.a)(Object(m.a)({},e),{},{status:c}));t(n)}}))}},B=function(e){return function(t){t({type:N});var a=S("edit/".concat(e.id)),n=new FormData;n.append("username",e.username),n.append("email",e.email),n.append("text",e.text);var r=function(e){return 0===e?1:10===e?11:e}(e.status);n.append("status",r);var c=k().token;return n.append("token",c),x.a.post(a,n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(a){if("ok"===a.data.status){var n=function(e){return{type:_,payload:e}}(Object(m.a)(Object(m.a)({},e),{},{status:r}));t(n)}if("error"===a.data.status){var c=function(e){return{type:R,payload:e}}(a.data);t(c)}return a}))}},J=a(173),q=a(177),Q=a(178),z=a(208),H=function(e){return y()?e.children:null},M=a(3),V=[{id:"username",numeric:!1,label:"User name"},{id:"email",numeric:!1,label:"Email"},{id:"text",numeric:!1,label:"Task text"},{id:"status",numeric:!1,label:"Task status"}];function X(e){var t=e.classes,a=e.order,n=e.orderBy,r=e.onRequestSort;return Object(M.jsx)(J.a,{children:Object(M.jsxs)(q.a,{children:[Object(M.jsx)(H,{children:Object(M.jsx)(Q.a,{padding:"checkbox"})}),V.map((function(e){return Object(M.jsx)(Q.a,{align:"left",padding:"default",sortDirection:n===e.id&&a,children:Object(M.jsxs)(z.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(c=e.id,function(e){r(e,c)}),children:[e.label,n===e.id?Object(M.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var c}))]})})}var Y=a(207),Z=a(181),$=a(182),ee=a(183),te=a(205),ae=a(187);function ne(e){var t=e.open,a=e.handleClose,r=e.row,c=Object(i.b)(),o=Object(i.c)((function(e){return e.task.editError})),s=Object(n.useState)(r.email),l=Object(O.a)(s,2),d=l[0],j=l[1],b=Object(n.useState)(r.username),p=Object(O.a)(b,2),m=p[0],h=p[1],x=Object(n.useState)(r.text),f=Object(O.a)(x,2),g=f[0],v=f[1];return Object(M.jsx)("div",{children:Object(M.jsxs)(Y.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",children:[Object(M.jsx)(Z.a,{id:"form-dialog-title",children:"New task"}),Object(M.jsxs)($.a,{children:[Object(M.jsx)(ee.a,{children:"To create new task, please enter your email, name and task text here."}),Object(M.jsx)(te.a,{autoFocus:!0,error:o.email,helperText:o.email,margin:"dense",id:"name",label:"Email Address",type:"email",fullWidth:!0,value:d,onChange:function(e){return j(e.target.value)},disabled:!0}),Object(M.jsx)(te.a,{margin:"dense",error:o.username,helperText:o.username,id:"username",label:"Username",type:"text",fullWidth:!0,value:m,onChange:function(e){return h(e.target.value)},disabled:!0}),Object(M.jsx)(te.a,{required:!0,margin:"dense",error:o.text||!g.length,helperText:o.text,id:"text",label:"Task text",type:"text",fullWidth:!0,multiline:!0,rows:3,value:g,onChange:function(e){return v(e.target.value)}})]}),Object(M.jsxs)(ae.a,{children:[Object(M.jsx)(u.a,{onClick:a,color:"primary",children:"Cancel"}),Object(M.jsx)(u.a,{onClick:function(){if(!g)return null;c(B({id:r.id,email:d,username:m,text:g,status:r.status})).then((function(e){"ok"===e.data.status&&(j(""),h(""),v(""),a())}))},color:"primary",children:"Submit"})]})]})})}var re=a(206),ce=a(189),oe=a(190),ie=function(e){var t,a=e.labelId,r=e.row,c=Object(i.b)(),o=Object(n.useState)(!1),s=Object(O.a)(o,2),l=s[0],d=s[1];return Object(M.jsxs)(n.Fragment,{children:[Object(M.jsxs)(q.a,{hover:!0,role:"checkbox",tabIndex:-1,children:[Object(M.jsx)(H,{children:Object(M.jsx)(Q.a,{component:"th",id:a,scope:"row",padding:"checkbox",children:Object(M.jsx)(re.a,{onClick:function(){c(G(r))},checked:10===r.status||11===r.status,inputProps:{"aria-labelledby":a}})})}),Object(M.jsx)(Q.a,{children:r.username}),Object(M.jsx)(Q.a,{children:r.email}),Object(M.jsx)(Q.a,{children:r.text}),Object(M.jsx)(Q.a,{children:(t=r.status,0===t?"\u0417\u0430\u0434\u0430\u0447\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430":1===t?"\u0417\u0430\u0434\u0430\u0447\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430, \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0430\u0434\u043c\u0438\u043d\u043e\u043c":10===t?"\u0417\u0430\u0434\u0430\u0447\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430":11===t?"\u0417\u0430\u0434\u0430\u0447\u0430 \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0430\u0434\u043c\u0438\u043d\u043e\u043c \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430":void 0)}),Object(M.jsx)(H,{children:Object(M.jsx)(Q.a,{onClick:function(){return d(!0)},padding:"checkbox",children:Object(M.jsx)(ce.a,{"aria-label":"edit task",children:Object(M.jsx)(oe.a,{})})})})]},r.id),Object(M.jsx)(ne,{row:r,open:l,handleClose:function(){return d(!1)}})]})};function se(e){var t=e.open,a=e.handleClose,r=e.page,c=Object(i.b)(),o=Object(i.c)((function(e){return e.task.createError})),s=Object(n.useState)(""),l=Object(O.a)(s,2),d=l[0],j=l[1],b=Object(n.useState)(""),p=Object(O.a)(b,2),m=p[0],h=p[1],x=Object(n.useState)(""),f=Object(O.a)(x,2),g=f[0],v=f[1];return Object(M.jsx)("div",{children:Object(M.jsxs)(Y.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",children:[Object(M.jsx)(Z.a,{id:"form-dialog-title",children:"New task"}),Object(M.jsxs)($.a,{children:[Object(M.jsx)(ee.a,{children:"To create new task, please enter your email, name and task text here."}),Object(M.jsx)(te.a,{autoFocus:!0,error:!!o.email,helperText:o.email,margin:"dense",id:"name",label:"Email Address",type:"email",fullWidth:!0,value:d,onChange:function(e){return j(e.target.value)}}),Object(M.jsx)(te.a,{margin:"dense",error:!!o.username,helperText:o.username,id:"username",label:"Username",type:"text",fullWidth:!0,value:m,onChange:function(e){return h(e.target.value)}}),Object(M.jsx)(te.a,{margin:"dense",error:!!o.text,helperText:o.text,id:"text",label:"Task text",type:"text",fullWidth:!0,multiline:!0,rows:3,value:g,onChange:function(e){return v(e.target.value)}})]}),Object(M.jsxs)(ae.a,{children:[Object(M.jsx)(u.a,{onClick:a,color:"primary",children:"Cancel"}),Object(M.jsx)(u.a,{onClick:function(){c(W({email:d,username:m,text:g})).then((function(e){"ok"===e.data.status&&(j(""),h(""),v(""),a(),c(P(r)))}))},color:"primary",children:"Submit"})]})]})})}var le=a(192),de=a(96),ue=a(210),je=a(193),be=a(191),pe=Object(be.a)((function(){return{toolbar:{paddingLeft:"16px"},title:{flex:"1 1 100%"}}})),Oe=function(e){var t=r.a.useState(!1),a=Object(O.a)(t,2),c=a[0],o=a[1],i=pe(),s=e.page;return Object(M.jsxs)(n.Fragment,{children:[Object(M.jsxs)(le.a,{disableGutters:!0,className:i.toolbar,children:[Object(M.jsx)(de.a,{className:i.title,variant:"h6",id:"tableTitle",component:"div",children:"Task list"}),Object(M.jsx)(ue.a,{title:"New task",children:Object(M.jsx)(ce.a,{onClick:function(){o(!0)},"aria-label":"filter list",children:Object(M.jsx)(je.a,{})})})]}),Object(M.jsx)(se,{open:c,handleClose:function(){o(!1)},page:s})]})},me=a(179),he=a(194),xe=a(195),fe=a(196),ge=a(203),ve=Object(be.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function ye(){var e=ve(),t=Object(i.b)(),a=r.a.useState("asc"),c=Object(O.a)(a,2),o=c[0],s=c[1],l=r.a.useState(""),d=Object(O.a)(l,2),u=d[0],j=d[1],b=r.a.useState(0),p=Object(O.a)(b,2),m=p[0],h=p[1],x=r.a.useState(3),f=Object(O.a)(x,2),y=f[0],k=f[1],S=Object(n.useCallback)((function(){t(P())}),[t]);Object(n.useEffect)((function(){S()}),[S]);var T=Object(i.c)((function(e){return e.task.data})),C=Object(i.c)((function(e){return e.task.count})),E=y-Math.min(y,C-m*y);return Object(M.jsx)("div",{className:e.root,children:Object(M.jsxs)(me.a,{className:e.paper,children:[Object(M.jsx)(Oe,{page:m}),Object(M.jsx)(he.a,{children:Object(M.jsxs)(xe.a,{className:e.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table",children:[Object(M.jsx)(X,{classes:e,order:o,orderBy:u,onRequestSort:function(e,t){s(u===t&&"asc"===o?"desc":"asc"),j(t)},rowCount:T.length}),Object(M.jsxs)(fe.a,{children:[v(T,g(o,u)).map((function(e,t){var a="enhanced-table-checkbox-".concat(t);return Object(M.jsx)(ie,{labelId:a,row:e},e.id)})),E>0&&Object(M.jsx)(q.a,{style:{height:53*E},children:Object(M.jsx)(Q.a,{colSpan:6})})]})]})}),Object(M.jsx)(ge.a,{rowsPerPageOptions:[3],component:"div",count:C,rowsPerPage:y,page:m,onChangePage:function(e,a){h(a),t(P(a+1))},onChangeRowsPerPage:function(e){k(parseInt(e.target.value,10)),h(0)}})]})})}var ke=a(69),Se=a.n(ke),Te=a(91),Ce="LOGIN_REQUEST",Ee="LOGIN_SUCCESS",we="LOGIN_ERROR",Le="LOGOUT",Ie=function(e){return{type:we,payload:e}},Ne=function(e){var t=e.username,a=e.password;return function(e){e({type:Ce});var n=S("login"),r=new FormData;return r.append("username",t),r.append("password",a),x.a.post(n,r).then((function(t){if("ok"===t.data.status){var a=function(e){var t={token:e,timestamp:Date.now()};return localStorage.setItem("token",JSON.stringify(t)),{type:Ee,payload:t}}(t.data.message.token);e(a)}if("error"===t.data.status){var n=Ie(t.data.message);e(n)}return t})).catch((function(t){var a=Ie(t);e(a)}))}},_e=a(198),Re=a(211),Ae=a(93),De=a.n(Ae),Ue=Object(be.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Fe(){var e=Ue(),t=Object(i.b)(),a=Object(i.c)((function(e){return e.auth.error})),r=Object(n.useState)(""),c=Object(O.a)(r,2),o=c[0],s=c[1],j=Object(n.useState)(""),b=Object(O.a)(j,2),p=b[0],m=b[1],h=Object(n.useState)(!1),x=Object(O.a)(h,2),f=x[0],g=x[1],v=function(){var e=Object(Te.a)(Se.a.mark((function e(){var a;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Ne({username:o,password:p}));case 2:a=e.sent,"ok"===a.data.status&&g(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f?Object(M.jsx)(l.a,{to:"/"}):Object(M.jsxs)(d.a,{component:"main",maxWidth:"xs",children:[Object(M.jsx)(_e.a,{}),Object(M.jsxs)("div",{className:e.paper,children:[Object(M.jsx)(Re.a,{className:e.avatar,children:Object(M.jsx)(De.a,{})}),Object(M.jsx)(de.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(M.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(M.jsx)(te.a,{error:!!a.username,helperText:a.username,value:o,onChange:function(e){return s(e.target.value)},variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoFocus:!0}),Object(M.jsx)(te.a,{error:!!a.password,helperText:a.password,value:p,onChange:function(e){return m(e.target.value)},variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password"}),Object(M.jsx)(u.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:v,children:"Sign In"})]})]})]})}var Ke=Object(be.a)((function(){return{routerList:{listStyleType:"none",paddingLeft:0,display:"flex"},homeButton:{marginRight:"10px"},routerLink:{textDecoration:"none",color:"inherit"}}}));function Pe(){var e=Ke(),t=Object(i.b)(),a=Object(i.c)((function(e){return e.auth.data}));return Object(M.jsx)(s.a,{children:Object(M.jsxs)(d.a,{children:[Object(M.jsx)("nav",{children:Object(M.jsxs)("ul",{className:e.routerList,children:[Object(M.jsx)("li",{children:Object(M.jsx)(s.b,{to:"/",className:e.routerLink,children:Object(M.jsx)(u.a,{variant:"outlined",color:"primary",startIcon:Object(M.jsx)(j.a,{}),className:e.homeButton,children:"Home"})})}),!a.token&&Object(M.jsx)("li",{children:Object(M.jsx)(s.b,{to:"/login",className:e.routerLink,children:Object(M.jsx)(u.a,{variant:"outlined",color:"primary",startIcon:Object(M.jsx)(b.a,{}),children:"Login"})})}),a.token&&Object(M.jsx)("li",{children:Object(M.jsx)(u.a,{onClick:function(){t((function(e){localStorage.removeItem("token"),e({type:Le})}))},variant:"outlined",color:"primary",startIcon:Object(M.jsx)(p.a,{}),children:"Logout"})})]})}),Object(M.jsxs)(l.d,{children:[Object(M.jsx)(l.b,{exact:!0,path:"/",children:Object(M.jsx)(ye,{})}),Object(M.jsx)(l.b,{path:"/login",children:localStorage.getItem("token")?Object(M.jsx)(l.a,{to:"/"}):Object(M.jsx)(Fe,{})})]})]})})}var We=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,212)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),c(e),o(e)}))},Ge=a(49),Be=a(94),Je={loading:!1,loaded:!1,error:{},data:[],count:0,craeteLoading:!1,createLoaded:!1,createError:{},createData:{},editLoading:!1,editLoaded:!1,editError:{},editData:{}},qe={loading:!1,loaded:!1,error:"",data:localStorage.getItem("token")?JSON.parse(localStorage.getItem("token")):{}},Qe=Object(Ge.c)({task:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(m.a)(Object(m.a)({},e),{},{loading:!0,loaded:!1,error:""});case C:return Object(m.a)(Object(m.a)({},e),{},{loading:!1,loaded:!0,error:"",data:t.payload.message.tasks,count:Number(t.payload.message.total_task_count)});case E:return Object(m.a)(Object(m.a)({},e),{},{loading:!1,loaded:!1,error:t.payload.message});case w:return Object(m.a)(Object(m.a)({},e),{},{createLoading:!0,createLoaded:!1,createError:""});case L:return Object(m.a)(Object(m.a)({},e),{},{createLoading:!1,createLoaded:!0,createError:"",createData:t.payload});case I:return Object(m.a)(Object(m.a)({},e),{},{createLoading:!1,createLoaded:!1,createError:t.payload.message});case N:return Object(m.a)(Object(m.a)({},e),{},{editLoading:!0,editLoaded:!1,editError:""});case _:var a=e.data.map((function(e){return e.id===t.payload.id?t.payload:e}));return Object(m.a)(Object(m.a)({},e),{},{editLoading:!1,editLoaded:!0,editError:"",data:a});case R:return Object(m.a)(Object(m.a)({},e),{},{createLoading:!1,createLoaded:!1,createError:t.payload.message});case A:var n=e.data.map((function(e){return e.id===t.payload.id?t.payload:e}));return Object(m.a)(Object(m.a)({},e),{},{data:n});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ce:return Object(m.a)(Object(m.a)({},e),{},{loading:!0,loaded:!1,error:""});case Ee:return Object(m.a)(Object(m.a)({},e),{},{loading:!1,loaded:!0,error:"",data:t.payload});case we:return Object(m.a)(Object(m.a)({},e),{},{loading:!1,loaded:!1,error:t.payload});case Le:return{loading:!1,loaded:!1,error:"",data:{}};default:return e}}}),ze=Object(Ge.d)(Qe,Object(Ge.a)(Be.a));o.a.render(Object(M.jsx)(i.a,{store:ze,children:Object(M.jsx)(Pe,{})}),document.getElementById("root")),We()}},[[142,1,2]]]);
//# sourceMappingURL=main.ae223e27.chunk.js.map